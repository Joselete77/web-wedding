<!doctype html>
<html class="no-js" lang="zxx">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Página principal | Boda JC&amp;E</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="site.webmanifest">
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- CSS here -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/flaticon.css">
    <link rel="stylesheet" href="assets/css/slicknav.css">
    <link rel="stylesheet" href="assets/css/animate.min.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/css/themify-icons.css">
    <link rel="stylesheet" href="assets/css/slick.css">
    <link rel="stylesheet" href="assets/css/nice-select.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<style>
  .upload-area {
    border: 2px dashed #403e2c;
    border-radius: 8px;
    padding: 3rem 2rem;
    background: rgba(64, 62, 44, 0.05);
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 1.5rem;
    position: relative;
    text-align: center;
    min-height: 425px;
  }
  .upload-area input[type="file"] {
    position: absolute;
    opacity: 0;
    width: 100%;
    height: 100%;
    cursor: pointer;
    top: 0;
    left: 0;
  }
  .upload-area label {
    cursor: pointer;
    color: #666;
    font-weight: 500;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
  }
  .upload-area label .icon {
    font-size: 4rem;
    display: block;
    margin-bottom: 20px;
  }
  .upload-area label .title {
    font-size: 18px;
    color: #888;
  }
  .upload-area label .subtitle {
    font-size: 14px;
    color: #bbb;
    margin-top: 10px;
  }
  .upload-area:hover {
    background: rgba(64, 62, 44, 0.1);
    border-color: #403e2c;
  }
  .upload-area.dragover {
    background: rgba(64, 62, 44, 0.2);
    border-color: #403e2c;
    transform: scale(1.02);
  }
</style>

<body>
<!-- Preloader Start -->
<div id="preloader-active">
    <div class="preloader d-flex align-items-center justify-content-center">
        <div class="preloader-inner position-relative">
            <div class="preloader-circle"></div>
            <div class="preloader-img pere-text">
                <img src="assets/img/logo/logo1.png" alt="">
            </div>
        </div>
    </div>
</div>
<!-- Preloader Start -->
<header>
    <!-- Header Start -->
    <div class="header-area">
            <div class="main-header header-sticky">
                <div class="container">
                    <div class="row align-items-center">
                        <!-- Logo -->
                        <div class="col-xl-2 col-lg-2">
                            <div class="logo">
                                <a href="index.html"><img src="assets/img/logo/logo1.png" alt=""></a>
                            </div>
                        </div>
                        <div class="col-xl-10 col-lg-10 col-md-10">
                            <!-- Main-menu -->
                            <div class="main-menu f-right d-none d-lg-block">
                                <nav>                              
                                    <ul id="navigation">                                                          
                                        <li><a href="index.html">Home</a></li>
                                        <li><a href="">Galería</a>
                                            <ul class="submenu">
                                                <li><a href="galleryCouple.html">Álbum de novios</a></li>
                                                <li><a href="galleryAll.html">Álbum grupal</a></li>
                                                <li><a href="uploadPhotos.html">Sube tus fotos</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div> 
                        <!-- Mobile Menu -->
                        <div class="col-12">
                            <div class="mobile_menu d-block d-lg-none"></div>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <!-- Header End -->
</header>
<main>
    <!--? Slider Area Start-->
    <div class="slider-area">
        <div class="slider-active">
            <!-- Single Slider -->
            <div class="single-slider slider-height hero-overly d-flex align-items-center" style="background-color: rgba(0, 0, 0, 0.7);">
                <div class="container">
                    <div class="row d-flex align-items-center">
                        <div class="col-xl-8 col-lg-6 col-md-8 ">
                            <div class="hero__caption">
                                <span data-animation="fadeInLeft" data-delay=".3s">20 de junio, 2025</span>
                                <h1 data-animation="fadeInLeft" data-delay=".5s" data-duration="2000ms">Juan Carlos<strong> y </strong> Esther</h1>
                                <p data-animation="fadeInLeft" data-delay=".9s">¡Nos casamos!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Single Slider -->
            <div class="single-slider slider-height hero-overly d-flex align-items-center" style="background-color: rgba(0, 0, 0, 0.7);">
                <div class="container">
                    <div class="row d-flex align-items-center">
                        <div class="col-xl-8 col-lg-6 col-md-8 ">
                            <div class="hero__caption">
                                <span data-animation="fadeInLeft" data-delay=".3s">20 de junio</span>
                                <h1 data-animation="fadeInLeft" data-delay=".5s" data-duration="2000ms">Juan Carlos<strong> y </strong> Esther</h1>
                                <p data-animation="fadeInLeft" data-delay=".9s">¡Nos casamos!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Slider Area End-->
    <!-- Our Story Start -->
    <div class="Our-story-area story-padding">
    <div class="container">
        <!-- Section Tittle -->
        <div class="row d-flex justify-content-center">
        <div class="col-xl-7 col-lg-8">
            <div class="section-tittle text-center mb-70">
            <h2>Nuestra Historia de Amor</h2>
            <img src="assets/img/gallery/tittle_img.png" alt="">
            <p>
                Hace años que caminamos de la mano por senderos de aventuras, risas y complicidad. Cada paso juntos nos ha acercado un poco más a este gran día, y queremos compartir con vosotros los momentos que nos han hecho quienes somos.
            </p>
            </div>
        </div>
        </div>
        <div class="row justify-content-center">
        <div class="col-lg-5">
            <div class="story-caption background-img mb-40 w-100" style="background-image: url(assets/img/gallery/story2.png);">
            <div class="story-details">
                <h4>La Pedida</h4>
                <p>
                Fue un atardecer inolvidable. Con el sol tiñendo de dorado el horizonte, me arrodillé y, con el corazón latiendo a mil por hora, pregunté si quería compartir el resto de sus días a mi lado.
                </p>
                <p>
                Sus ojos brillaron con emoción, ¡y la respuesta fue un sí lleno de amor! Ese instante marcó el inicio de nuestro “para siempre”.
                </p>
            </div>
            </div>
        </div>
        <div class="col-lg-5">
            <div class="story-img">
            <img class="story2" src="assets/img/couple/6.jpeg" alt="Nuestra historia">
            </div>
        </div>
        </div>
    </div>
    </div>
    <!-- Our Story End -->
    <!--? Services Start -->
    <section class="pricing-card-area section-padding30 section-bg" data-background="assets/img/gallery/section_bg1.png">
    <div class="container">
        <!-- Section Tittle -->
        <div class="row d-flex justify-content-center">
        <div class="col-lg-8">
            <div class="section-tittle text-center mb-70">
            <h2>Información de la Boda</h2>
            <img src="assets/img/gallery/tittle_img.png" alt="">
            <p>Te esperamos para celebrar juntos este día tan especial. A continuación encontrarás los detalles de cada momento.</p>
            </div>
        </div>
        </div>
        <div class="row align-items-end">
        <!-- Ceremonia -->
        <div class="col-xl-4 col-lg-4 col-md-6">
        <div class="single-card text-center mb-30">
            <div class="card-top">
            <i class="fas fa-gavel fa-3x"></i>
            <h4 class="mt-3">La Ceremonia</h4>
            </div>
            <div class="card-bottom">
            <ul>
                <li><i class="fas fa-calendar-alt"></i>20 de junio de 2025</li>
                <li><i class="far fa-clock"></i>12:00</li>
                <li><i class="fas fa-map-marker-alt"></i>Ciudad de la Justicia de Córdoba</li>
                <li><i class="far fa-map"></i>Ver en el mapa</li>
            </ul>
            </div>
            <div class="card-buttons mt-30">
            <a href="https://www.google.com/maps/search/?api=1&query=Ciudad+de+la+Justicia+C%C3%B3rdoba+Isla+Mallorca+s%2Fn+14011" target="_blank" rel="noopener" class="btn card-btn1">
                Cómo llegar
            </a>
            </div>
        </div>
        </div>

        <div class="col-xl-4 col-lg-4 col-md-6">
        <div class="single-card active text-center mb-30">
            <div class="card-top">
            <i class="fas fa-utensils fa-3x"></i>
            <h4 class="mt-3">La Comida</h4>
            </div>
            <div class="card-bottom">
            <ul>
                <li><i class="fas fa-calendar-alt"></i>20 de junio de 2025</li>
                <li><i class="far fa-clock"></i>14:30</li>
                <li><i class="fas fa-map-marker-alt"></i>Restaurante Ermita de la Candelaria</li>
                <li><i class="far fa-map"></i>Ver en el mapa</li>
            </ul>
            </div>
            <div class="card-buttons mt-30">
            <a href="https://www.google.com/maps/search/?api=1&query=Calle+Candelaria+2+14002+C%C3%B3rdoba" target="_blank" rel="noopener" class="btn card-btn1">
                Cómo llegar
            </a>
            </div>
        </div>
        </div>

        <div class="col-xl-4 col-lg-4 col-md-6">
        <div class="single-card text-center mb-30">
            <div class="card-top">
            <i class="fas fa-music fa-3x"></i>
            <h4 class="mt-3">La Fiesta</h4>
            </div>
            <div class="card-bottom">
            <ul>
                <li><i class="fas fa-calendar-alt"></i>20 de junio de 2025</li>
                <li><i class="far fa-clock"></i>21:00</li>
                <li><i class="fas fa-map-marker-alt"></i>Sojo Confusión</li>
                <li><i class="far fa-map"></i>Ver en el mapa</li>
            </ul>
            </div>
            <div class="card-buttons mt-30">
            <a href="https://www.google.com/maps/search/?api=1&query=Sojo+Confusi%C3%B3n+Enrique+Romero+Torres+3+14003+C%C3%B3rdoba" target="_blank" rel="noopener" class="btn card-btn1">
                Cómo llegar
            </a>
            </div>
        </div>
        </div>

        </div>

    </div>
    </section>
    <!-- Services Card End -->
    <!-- Count Down Start -->
    <div class="count-down-area">
    <div class="container">
        <div class="row justify-content-center">
        <div class="col-lg-12 col-md-12">
            <div class="count-down-wrapper" data-background="assets/img/gallery/section_bg2.png">
            <div class="row justify-content-between">
                <div class="col-lg-3 col-md-6 col-sm-6">
                <!-- Counter Up -->
                <div class="single-counter text-center">
                    <span class="counter" id="days">0</span>
                    <p>días</p>
                </div>
                </div>
                <div class="col-lg-2 col-md-6 col-sm-6">
                <!-- Counter Up -->
                <div class="single-counter active text-center">
                    <span class="counter" id="hours">0</span>
                    <p>horas</p>
                </div>
                </div>
                <div class="col-lg-2 col-md-6 col-sm-6">
                <!-- Counter Up -->
                <div class="single-counter text-center">
                    <span class="counter" id="minutes">0</span>
                    <p>minutos</p>
                </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-6">
                <!-- Counter Up -->
                <div class="single-counter text-center">
                    <span class="counter" id="seconds">0</span>
                    <p>segundos</p>
                </div>
                </div>
            </div>
            </div>
        </div>
        </div>
    </div>
    </div>
    <!-- Count Down End -->

    <!--? Gallery Area Start -->
    <div class="gallery-area section-padding4">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-6">
                    <div class="single-gallery mb-30">
                        <div class="gallery-img" style="background-image: url(assets/img/couple/1.jpeg);">
                        </div>
                        <div class="thumb-content-box">
                            <div class="thumb-content">
                                <h3>Fin de Año</h3>
                                <a href="assets/img/couple/1.jpeg" class="menorie-icon"> <i class="ti-plus"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-8 col-md-6">
                    <div class="single-gallery mb-30">
                        <div class="gallery-img" style="background-image: url(assets/img/couple/2.jpeg);">
                        </div>
                        <div class="thumb-content-box">
                            <div class="thumb-content">
                                <h3>Roma</h3>
                                <a href="assets/img/couple/2.jpeg" class="menorie-icon"> <i class="ti-plus"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-8 col-md-6">
                    <div class="single-gallery mb-30">
                        <div class="gallery-img" style="background-image: url(assets/img/couple/3.jpeg);">
                        </div>
                        <div class="thumb-content-box">
                            <div class="thumb-content">
                                <h3>París</h3>
                                <a href="assets/img/couple/3.jpeg" class="menorie-icon"> <i class="ti-plus"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="single-gallery mb-30">
                        <div class="gallery-img" style="background-image: url(assets/img/couple/4.jpeg);">
                        </div>
                        <div class="thumb-content-box">
                            <div class="thumb-content">
                                <h3>Madrid</h3>
                                <a href="assets/img/couple/4.jpeg" class="menorie-icon"> <i class="ti-plus"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Gallery Area End -->
    <!-- Contact form Start -->
    <div class="contact-form section-padding30 fix">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-xl-6 col-lg-6">
                    <div class="form-wrapper">
                        <form id="contact-form" action="#" method="POST" enctype="multipart/form-data">
                            <!-- sección de título -->
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="section-tittle tittle-form text-center mb-30">
                                        <h2>Sube tus imágenes</h2>
                                        <img src="assets/img/gallery/tittle_img2.png" alt="decoración de título">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12 mb-30">
                                    <div class="form-box upload-area">
                                        <input type="file"
                                            name="images"
                                            id="imageUpload"
                                            accept="image/*,video/*"
                                            multiple
                                            style="position: absolute; opacity: 0; width: 100%; height: 100%;
                                                    cursor: pointer; top: 0; left: 0;">
                                        <label for="imageUpload">
                                            <span style="font-size: 4rem; display: block; margin-bottom: 20px;">📷</span>
                                            <span style="font-size: 18px; color: black;">Sube imágenes</span>
                                            <span style="font-size: 14px; color: black; margin-top: 10px;">
                                                Arrastra y suelta o haz clic para seleccionar
                                            </span>
                                        </label>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div class="submit-info">
                                        <button class="btn" type="submit">Confirmar ahora</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <!-- Shape inner Flower -->
                        <div class="shape-inner-flower">
                            <img src="assets/img/gallery/shape2.png" class="shpe2" alt="forma decorativa interior">
                        </div>
                        <!-- Shape outer Flower -->
                        <div class="shape-outer-flower">
                            <img src="assets/img/flower/from-top.png" class="outer-top" alt="flor decorativa superior">
                            <img src="assets/img/flower/from-bottom.png" class="outer-bottom" alt="flor decorativa inferior">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Contact form End -->

    <!-- Gallery-2 img Start-->
    <div class="gallery-area2 fix mb-5">
        <div class="container-fluid p-0">
            <div class="row">
                <div class="col-md-12">
                    <div class="gallery-active owl-carousel">
                        <div class="gallery-img">
                            <a href="#"><img src="assets/img/couple/6.jpeg" alt=""></a>
                        </div>
                        <div class="gallery-img">
                            <a href="#"><img src="assets/img/couple/7.jpeg" alt=""></a>
                        </div>
                        <div class="gallery-img">
                            <a href="#"><img src="assets/img/couple/8.jpeg" alt=""></a>
                        </div>
                        <div class="gallery-img">
                            <a href="#"><img src="assets/img/couple/9.jpeg" alt=""></a>
                        </div>
                        <div class="gallery-img">
                            <a href="#"><img src="assets/img/couple/10.jpeg" alt=""></a>
                        </div>
                        <div class="gallery-img">
                            <a href="#"><img src="assets/img/couple/11.jpeg" alt=""></a>
                        </div>
                        <div class="gallery-img">
                            <a href="#"><img src="assets/img/couple/1.jpeg" alt=""></a>
                        </div>
                        <div class="gallery-img">
                            <a href="#"><img src="assets/img/couple/2.jpeg" alt=""></a>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Gallery-2 img End-->
</main>
<footer>
  <!-- Footer Boda Juan Carlos & Esther -->
  <div class="footer-main" style="background-image: url('assets/img/gallery/section_bg4.png');">
    <div class="footer-area footer-padding">
      <div class="container text-center">
        <!-- Nombres y Fecha -->
        <div class="row justify-content-center mb-30">
          <div class="col-lg-8">
            <h2 class="text-white">Juan Carlos &amp; Esther</h2>
            <p class="text-white">20 de junio de 2025</p>
            <img class="w-100" src="assets/img/gallery/tittle_img.png" alt="Decoración" style="margin-top:10px;">
          </div>
        </div>
        <!-- Mensaje de agradecimiento -->
        <div class="row justify-content-center mb-50">
          <div class="col-lg-8">
            <p class="text-white">¡Gracias por acompañarnos en este día tan especial! Nos hace mucha ilusión celebrar con todos vosotros.</p>
          </div>
        </div>
        <!-- Redes Sociales -->
        <div class="row justify-content-center">
          <div class="col-auto">
            <a href="https://www.instagram.com/juanyesther" target="_blank" class="footer-social">
              <i class="fab fa-instagram fa-2x"></i>
            </a>
          </div>
          <div class="col-auto">
            <a href="https://www.facebook.com/juanyesther" target="_blank" class="footer-social">
              <i class="fab fa-facebook-f fa-2x"></i>
            </a>
          </div>
          <div class="col-auto">
            <a href="https://www.twitter.com/juanyesther" target="_blank" class="footer-social">
              <i class="fab fa-twitter fa-2x"></i>
            </a>
          </div>
        </div>
        <!-- Créditos -->
        <div class="row justify-content-center mt-50">
          <div class="col-lg-8">
            <p class="text-white" style="font-size: 0.9rem;">Diseño web por José Ángel Dorado | &copy; 2025 Todos los derechos reservados</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Fin Footer Boda -->
</footer>

    <!-- JS here -->

    <script src="./assets/js/vendor/modernizr-3.5.0.min.js"></script>
    <!-- Jquery, Popper, Bootstrap -->
    <script src="./assets/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="./assets/js/popper.min.js"></script>
    <script src="./assets/js/bootstrap.min.js"></script>
    <!-- Jquery Mobile Menu -->
    <script src="./assets/js/jquery.slicknav.min.js"></script>

    <!-- Jquery Slick , Owl-Carousel Plugins -->
    <script src="./assets/js/owl.carousel.min.js"></script>
    <script src="./assets/js/slick.min.js"></script>
    <!-- Date Picker -->
    <script src="./assets/js/gijgo.min.js"></script>
    <!-- One Page, Animated-HeadLin -->
    <script src="./assets/js/wow.min.js"></script>
    <script src="./assets/js/animated.headline.js"></script>
    <script src="./assets/js/jquery.magnific-popup.js"></script>

    <!-- Scrollup, nice-select, sticky -->
    <script src="./assets/js/jquery.scrollUp.min.js"></script>
    <script src="./assets/js/jquery.nice-select.min.js"></script>
    <script src="./assets/js/jquery.sticky.js"></script>

    <!-- contact js -->
    <script src="./assets/js/contact.js"></script>
    <script src="./assets/js/jquery.form.js"></script>
    <script src="./assets/js/jquery.validate.min.js"></script>
    <script src="./assets/js/mail-script.js"></script>
    <script src="./assets/js/jquery.ajaxchimp.min.js"></script>

    <!-- Jquery Plugins, main Jquery -->	
    <script src="./assets/js/plugins.js"></script>
    <script src="./assets/js/main.js"></script>
    
<script>
// 1. Fecha objetivo: 20 junio 2025, 12:00 PM
const targetDate = new Date("June 20, 2025 12:00:00").getTime();

// 2. Función que actualiza el contador
function updateCountdown() {
  const now = Date.now();
  const diff = targetDate - now;

  if (diff <= 0) {
    // ¡Llegó la fecha! Poner todo a cero y detener el intervalo
    document.getElementById("days").textContent    = "0";
    document.getElementById("hours").textContent   = "0";
    document.getElementById("minutes").textContent = "0";
    document.getElementById("seconds").textContent = "0";
    clearInterval(intervalId);
    return;
  }

  // 3. Cálculos de tiempo
  const days    = Math.floor(diff / (1000 * 60 * 60 * 24));
  const hours   = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  const minutes = Math.floor((diff % (1000 * 60 * 60))      / (1000 * 60));
  const seconds = Math.floor((diff % (1000 * 60))             / 1000);

  // 4. Actualizar el DOM
  document.getElementById("days").textContent    = days;
  document.getElementById("hours").textContent   = hours;
  document.getElementById("minutes").textContent = minutes;
  document.getElementById("seconds").textContent = seconds;
}

// Ejecutar una primera vez y luego cada segundo
updateCountdown();
const intervalId = setInterval(updateCountdown, 1000);
</script>
<script>
/* ---------- SELECCIÓN Y PREVISUALIZACIÓN ---------- */
const fileInput   = document.getElementById("imageUpload");
const uploadArea  = document.querySelector(".upload-area");
const uploadLabel = uploadArea.querySelector("label");

let selectedFiles = new Map();   // id → File

function formatFileSize(bytes) {
    if (bytes === 0) return "0 Bytes";
    const k = 1024, sizes = ["Bytes","KB","MB","GB"];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return (bytes/Math.pow(k,i)).toFixed(2) + " " + sizes[i];
}
function getFileType(file){
    if (file.type.startsWith("image/")) return "image";
    if (file.type.startsWith("video/")) return "video";
    return "unknown";
}
function updateUploadAreaContent () {
  const total = selectedFiles.size;

  /* ---------- SIN archivos seleccionados ---------- */
  if (!total) {
    uploadLabel.innerHTML = `
      <i class="fas fa-image" style="font-size:4rem;display:block;margin-bottom:20px"></i>
      <span style="font-size:18px;color:#000">Sube imágenes y videos</span>
      <span style="font-size:14px;color:#000;margin-top:10px;display:block">
        Arrastra y suelta o haz clic para seleccionar
      </span>`;

    /* Reactivar la zona de subida */
    uploadLabel.setAttribute("for", "imageUpload"); // vuelve a enlazar label-input
    uploadLabel.style.cursor      = "pointer";
    fileInput.style.pointerEvents = "auto";
    fileInput.style.cursor        = "pointer";
    uploadArea.style.cursor       = "pointer";
    return;
  }

  /* ---------- CON archivos seleccionados ---------- */
  const imgs      = [...selectedFiles.values()].filter(f => getFileType(f) === "image").length;
  const vids      = total - imgs;
  const totalSize = [...selectedFiles.values()].reduce((a, f) => a + f.size, 0);

  uploadLabel.innerHTML = `
    <i class="fas fa-check-circle" style="font-size:3rem;display:block;margin-bottom:15px"></i>
    <span style="font-size:18px;color:#000;font-weight:bold">
      ${imgs ? `${imgs} imagen${imgs > 1 ? "es" : ""}` : ""}
      ${imgs && vids ? " y " : ""}
      ${vids ? `${vids} video${vids > 1 ? "s" : ""}` : ""}
      seleccionad${total > 1 ? "os" : "o"}
    </span>
    <span style="font-size:14px;color:#666;margin-top:8px;display:block">
      Tamaño total: ${formatFileSize(totalSize)}
    </span>
    <span style="font-size:12px;color:#888;margin-top:8px;display:block">
      Pulsa “Limpiar” para reiniciar
    </span>
    <button type="button"
            onclick="event.preventDefault(); event.stopPropagation(); clearAllFiles();"
            style="margin-top:10px;padding:5px 15px;background:#403e2c;color:#fff;
                   border:none;border-radius:4px;font-size:12px;cursor:pointer">
      Limpiar selección
    </button>`;

  /* Desactivar la zona de subida */
  uploadLabel.removeAttribute("for");     // evita que label dispare el input
  uploadLabel.style.cursor      = "default";
  fileInput.style.pointerEvents = "none"; // el input ya no recibe clics
  fileInput.style.cursor        = "default";
  uploadArea.style.cursor       = "default";
}


function addFiles(files){
    [...files].forEach(file=>{
        if(getFileType(file)==="unknown"){
            alert(`El archivo "${file.name}" no es compatible.`);
            return;
        }
        const exists=[...selectedFiles.values()].some(
            f=>f.name===file.name&&f.size===file.size
        );
        if(exists) return;
        const id=Date.now()+"_"+Math.random().toString(36).substr(2,9);
        selectedFiles.set(id,file);
    });
    updateUploadAreaContent();
}
function clearAllFiles(){ selectedFiles.clear(); updateUploadAreaContent(); }
function getSelectedFiles(){ return [...selectedFiles.entries()]; }

/* ---------- CONSTANTES Y RUTAS DE SUBIDA ---------- */
const MAX_FUNCTION_PAYLOAD = 4.5*1024*1024;          // 4,5 MB
const DIRECT_UPLOAD_PRESET = "my_unsigned";           // preset unsigned
const CLOUD_NAME           = "dpv082xae";             // tu cloud name

async function uploadViaFunction(fileId,file){
    const fdStatus=document.getElementById(`status-${fileId}`); // opcional
    if(fdStatus){ fdStatus.textContent="Subiendo…"; fdStatus.className="upload-status status-uploading"; }
    return new Promise((res,rej)=>{
        const reader=new FileReader();
        reader.onload=async()=>{
            try{
                const [prefix,base64]=reader.result.split(",");
                const mimeType=prefix.match(/data:(.*);base64/)[1];
                const r=await fetch("/.netlify/functions/upload",{
                    method:"POST",
                    headers:{ "Content-Type":"application/json"},
                    body:JSON.stringify({filename:file.name,mimeType,data:base64})
                });
                const json=await r.json();
                if(!r.ok) throw new Error(json.error||"Error desconocido");
                if(fdStatus){ fdStatus.textContent="Subido ✓"; fdStatus.className="upload-status status-success"; }
                res(json);
            }catch(err){
                if(fdStatus){ fdStatus.textContent="Error ✗"; fdStatus.className="upload-status status-error"; }
                rej(err);
            }
        };
        reader.onerror=()=>rej(new Error("Error al leer el archivo"));
        reader.readAsDataURL(file);
    });
}
async function uploadDirectToCloudinary(fileId,file){
    const fdStatus=document.getElementById(`status-${fileId}`);
    if(fdStatus){ fdStatus.textContent="Subiendo…"; fdStatus.className="upload-status status-uploading"; }
    const fd=new FormData();
    fd.append("file",file);
    fd.append("upload_preset",DIRECT_UPLOAD_PRESET);
    fd.append("folder","wed-master");
    const r=await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/auto/upload`,{
        method:"POST",body:fd
    });
    const json=await r.json();
    if(!r.ok){
        if(fdStatus){ fdStatus.textContent="Error ✗"; fdStatus.className="upload-status status-error"; }
        throw new Error(json.error?.message||"Cloudinary error");
    }
    if(fdStatus){ fdStatus.textContent="Subido ✓"; fdStatus.className="upload-status status-success"; }
    return json;
}
async function uploadFile(fileId,file){
    return file.size<=MAX_FUNCTION_PAYLOAD
        ? uploadViaFunction(fileId,file)
        : uploadDirectToCloudinary(fileId,file);
}

/* ---------- PROGRESO Y RESULTADOS ---------- */
function showUploadProgress(){
    uploadLabel.innerHTML=`
        <i class="fa-solid fa-hourglass-start" style="font-size:3rem;display:block;margin-bottom:15px;"></i>
        <span style="font-size:18px;font-weight:bold">Subiendo archivos…</span>
        <div style="margin-top:15px">
            <!-- Pista (track) más clara -->
            <div style="width:100%;height:8px;background:#e6e5de;border-radius:4px;overflow:hidden">
                <!-- Barra de progreso con el color principal -->
                <div id="progressBar"
                    style="width:0%;height:100%;background:#403e2c;transition:width .3s"></div>
            </div>

            <!-- Texto de porcentaje -->
            <span id="progressText"
                style="font-size:12px;color:#6d6b5b;margin-top:8px;display:block">
                0 % completado
            </span>
        </div>`;
}
function updateProgress(current,total){
    const pct=Math.round((current/total)*100);
    const bar=document.getElementById("progressBar");
    const text=document.getElementById("progressText");
    if(bar)  bar.style.width=pct+"%";
    if(text) text.textContent=`${pct}% completado (${current}/${total} archivos)`;
}
function showUploadSuccess(list){
    uploadLabel.innerHTML=`
        <span style="font-size:3rem;display:block;margin-bottom:15px">🎉</span>
        <span style="font-size:18px;color:#28a745;font-weight:bold">
            ¡${list.length} archivo(s) subido(s) exitosamente!
        </span>
        <div style="margin-top:15px;text-align:left;max-height:200px;overflow-y:auto">
            ${list.map(f=>`
                <div style="padding:8px;background:#f8f9fa;margin:5px 0;border-radius:4px;font-size:12px">
                    <strong>${f.originalName}</strong><br>
                    <a href="${f.url}" target="_blank" style="color:#007bff;text-decoration:none">Ver archivo</a>
                </div>`).join("")}
        </div>
        <button type="button" onclick="resetUploadArea()" style="
            margin-top:15px;padding:8px 20px;background:#007bff;color:#fff;border:none;
            border-radius:4px;font-size:14px;cursor:pointer">Subir más archivos
        </button>`;
}
function showUploadError(msg,failed=[]){
    uploadLabel.innerHTML=`
        <span style="font-size:3rem;display:block;margin-bottom:15px">❌</span>
        <span style="font-size:18px;color:#dc3545;font-weight:bold">Error al subir archivos</span>
        <div style="margin-top:10px;font-size:14px;color:#666">${msg}</div>
        ${failed.length?`
            <div style="margin-top:15px;text-align:left;max-height:150px;overflow-y:auto">
                <strong style="font-size:12px;color:#dc3545">Fallaron:</strong>
                ${failed.map(f=>`
                    <div style="padding:5px;background:#f8d7da;margin:3px 0;border-radius:3px;font-size:11px">${f}</div>`).join("")}
            </div>`:""}
        <button type="button" onclick="resetUploadArea()" style="
            margin-top:15px;padding:8px 20px;background:#dc3545;color:#fff;border:none;
            border-radius:4px;font-size:14px;cursor:pointer">Intentar de nuevo
        </button>`;
}
function resetUploadArea(){ clearAllFiles(); }

/* ---------- SUBIDA PRINCIPAL ---------- */
async function handleFileUpload(){
    const entries=getSelectedFiles(); // [[id, File], ...]
    if(!entries.length){ alert("Selecciona al menos un archivo."); return false; }
    showUploadProgress();
    const uploaded=[],failed=[];
    for(let i=0;i<entries.length;i++){
        const [id,file]=entries[i];
        try{
            updateProgress(i,entries.length);
            const res=await uploadFile(id,file);
            uploaded.push({originalName:file.name,url:res.secure_url||res.url});
            updateProgress(i+1,entries.length);
        }catch(err){
            console.error(`Error "${file.name}":`,err);
            failed.push(file.name);
        }
    }
    if(uploaded.length && !failed.length){
        showUploadSuccess(uploaded); return true;
    }
    if(uploaded.length && failed.length){
        showUploadError(`Se subieron ${uploaded.length} correctamente y ${failed.length} fallaron.`,failed); return false;
    }
    showUploadError("No se pudo subir ningún archivo.",failed); return false;
}

/* ---------- EVENTOS DE UI ---------- */
uploadArea.addEventListener("dragover",e=>{
    e.preventDefault(); e.stopPropagation();
    uploadArea.style.background="#f8f9fa"; uploadArea.style.border="2px dashed #007bff";
});
uploadArea.addEventListener("dragleave",e=>{
    e.preventDefault(); e.stopPropagation();
    if(!uploadArea.contains(e.relatedTarget)){ uploadArea.style.background=""; uploadArea.style.border=""; }
});
uploadArea.addEventListener("drop",e=>{
    e.preventDefault(); e.stopPropagation();
    uploadArea.style.background=""; uploadArea.style.border="";
    if(e.dataTransfer.files.length) addFiles(e.dataTransfer.files);
});
uploadArea.addEventListener("click", e => {
  if (selectedFiles.size === 0) {       // solo cuando no hay archivos
    e.preventDefault();
    e.stopPropagation();
    fileInput.click();
  }
});
fileInput.addEventListener("change",e=>{
    if(e.target.files.length){ addFiles(e.target.files); e.target.value=""; }
});
fileInput.addEventListener("click",e=>e.stopPropagation());

document.addEventListener("DOMContentLoaded",()=>{
    const submit=document.querySelector(".submit-info button[type='submit']");
    if(submit){
        submit.addEventListener("click",async function(e){
            e.preventDefault();
            const txt=this.textContent; this.disabled=true; this.textContent="Subiendo…";
            try{ await handleFileUpload(); }catch(err){ console.error(err); }
            finally{ this.disabled=false; this.textContent=txt; }
        });
    }
});

/* ---------- EXPONE FUNCIONES GLOBALES ---------- */
window.clearAllFiles  = clearAllFiles;
window.getSelectedFiles = ()=>[...selectedFiles.values()];
window.handleFileUpload = handleFileUpload;
window.resetUploadArea  = resetUploadArea;

updateUploadAreaContent();   // estado inicial
</script>


</body>
</html>