<!doctype html>
<html class="no-js" lang="zxx">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Sube tus fotos | Boda JC&amp;E </title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="manifest" href="site.webmanifest">
		<link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-p1CmHzvG7V0q1u/Pu8UrFvGk6u3qUoM0zM2wqFhFh5m2ZK0T5C1rK0esCxv9DXi8hGdjOb+5kdTOw8YErW5RQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
		<!-- CSS here -->
            <link rel="stylesheet" href="assets/css/bootstrap.min.css">
            <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
            <link rel="stylesheet" href="assets/css/flaticon.css">
            <link rel="stylesheet" href="assets/css/slicknav.css">
            <link rel="stylesheet" href="assets/css/animate.min.css">
            <link rel="stylesheet" href="assets/css/magnific-popup.css">
            <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
            <link rel="stylesheet" href="assets/css/themify-icons.css">
            <link rel="stylesheet" href="assets/css/slick.css">
            <link rel="stylesheet" href="assets/css/nice-select.css">
            <link rel="stylesheet" href="assets/css/style.css">
   </head>
<style>
    /* Contenedor principal */
    .gallery-area {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        max-width: 600px;
        margin: 0 auto;
    }

    /* √Årea de upload */
    .upload-area {
        border: 2px dashed #ff2828;
        border-radius: 8px;
        padding: 3rem 2rem;
        background: rgba(255, 40, 40, 0.05);
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 1.5rem;
        position: relative;
    }

    .upload-area:hover {
        background: rgba(255, 40, 40, 0.1);
        border-color: #ff2828;
    }

    .upload-area.dragover {
        background: rgba(255, 40, 40, 0.2);
        border-color: #ff2828;
        transform: scale(1.02);
    }

    /* Elementos del √°rea de upload */
    .upload-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        color: #999;
    }

    .upload-text {
        color: #666;
        font-size: 1.1rem;
        margin-bottom: 0.5rem;
        font-weight: 500;
    }

    .upload-subtext {
        color: #999;
        font-size: 0.9rem;
    }

    #fileInput {
        display: none;
    }

    /* Botones principales */
    .card-btn1 {
        background: linear-gradient(135deg, #ff2828, #e01e1e);
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        margin: 3px;
        font-size: 0.85rem;
        font-weight: 500;
        transition: all 0.2s ease;
        box-shadow: 0 2px 4px rgba(255, 40, 40, 0.2);
        cursor: pointer;
    }

    .btn-secondary {
        background: linear-gradient(135deg, #6c757d, #545b62);
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        margin: 3px;
        font-size: 0.85rem;
        font-weight: 500;
        transition: all 0.2s ease;
        box-shadow: 0 2px 4px rgba(108, 117, 125, 0.2);
        cursor: pointer;
        color: white;
    }


    /* Preview de archivos */
    .file-preview {
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 12px;
        margin: 8px 0;
        background-color: #fff;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .file-preview img, 
    .file-preview video {
        max-width: 80px;
        max-height: 60px;
        border-radius: 4px;
        object-fit: cover;
    }

    /* Informaci√≥n del archivo */
    .file-info {
        margin-left: 12px;
        flex-grow: 1;
    }

    .file-name {
        font-weight: 500;
        color: #495057;
        margin-bottom: 3px;
        font-size: 0.9rem;
        line-height: 1.2;
    }

    .file-size {
        color: #6c757d;
        font-size: 0.8rem;
        margin-bottom: 4px;
    }

    /* Etiquetas de tipo de archivo */
    .file-type {
        display: inline-block;
        padding: 2px 6px;
        border-radius: 10px;
        font-size: 0.7rem;
        font-weight: 500;
        margin-right: 6px;
    }

    .file-type.image {
        background-color: #d4edda;
        color: #155724;
    }

    .file-type.video {
        background-color: #d1ecf1;
        color: #0c5460;
    }

    /* Bot√≥n de eliminar archivo */
    .remove-file {
        background: linear-gradient(135deg, #dc3545, #c82333);
        color: white;
        border: none;
        border-radius: 50%;
        width: 22px;
        height: 22px;
        font-size: 11px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        box-shadow: 0 1px 3px rgba(220, 53, 69, 0.3);
    }

    /* Estados de upload */
    .upload-status {
        padding: 1px 6px;
        border-radius: 10px;
        font-size: 0.7rem;
        font-weight: 500;
        margin-top: 3px;
        display: inline-block;
    }

    .status-pending {
        background-color: #fff3cd;
        color: #856404;
    }

    .status-uploading {
        background-color: #ffebee;
        color: #c62828;
    }

    .status-success {
        background-color: #d4edda;
        color: #155724;
    }

    .status-error {
        background-color: #f8d7da;
        color: #721c24;
    }

    /* Preview general */
    .preview {
        margin-top: 1.5rem;
        display: none;
    }

    .preview img {
        max-width: 100%;
        max-height: 200px;
        border-radius: 6px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    /* Galer√≠a */
    #gallery {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
    }

    #gallery .item {
        text-align: center;
        margin: 0.5rem;
    }

    #gallery .item img {
        display: block;
        max-width: 150px;
        border-radius: 4px;
        border: 1px solid #ccc;
    }

    #gallery .item p {
        font-size: 0.8rem;
        margin: 0.2rem 0 0;
        word-break: break-all;
    }

    #previewContainer img {
        max-width: 150px;
        margin: 0.5rem;
        border: 1px solid #ccc;
        border-radius: 4px;
    }

    /* Ocultar elementos */
    .upload-progress {
        display: none;
    }
</style>
   <body>
    <!--? Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="preloader-circle"></div>
                <div class="preloader-img pere-text">
                    <img src="assets/img/logo/logo1.png" alt="">
                </div>
            </div>
        </div>
    </div>
    <!-- Preloader Start -->
    <header>
        <!-- Header Start -->
        <div class="header-area">
                <div class="main-header header-sticky">
                    <div class="container">
                        <div class="row align-items-center">
                            <!-- Logo -->
                            <div class="col-xl-2 col-lg-2">
                                <div class="logo">
                                    <a href="index.html"><img src="assets/img/logo/logo1.png" alt=""></a>
                                </div>
                            </div>
                            <div class="col-xl-10 col-lg-10 col-md-10">
                                <!-- Main-menu -->
                                <div class="main-menu f-right d-none d-lg-block">
                                    <nav>                              
                                        <ul id="navigation">                                                          
                                            <li><a href="index.html">Home</a></li>
                                            <li><a href="">Galer√≠a</a>
                                                <ul class="submenu">
                                                    <li><a href="galleryCouple.html">√Ålbum de novios</a></li>
                                                    <li><a href="galleryAll.html">√Ålbum grupal</a></li>
                                                    <li><a href="uploadPhotos.html">Sube tus fotos</a></li>
                                                </ul>
                                            </li>
                                        </ul>
                                    </nav>
                                </div>
                            </div> 
                            <!-- Mobile Menu -->
                            <div class="col-12">
                                <div class="mobile_menu d-block d-lg-none"></div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
        <!-- Header End -->
    </header>
    <main>
        <!--? slider Area Start-->
        <div class="slider-area2 ">
            <!-- Mobile Menu -->
            <div class="single-slider slider-height2  hero-overly d-flex align-items-center">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-12">
                            <div class="hero-cap">
                                <h2>Sube tus fotos de la boda</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- slider End -->
        <!--? Gallery Area Start -->
        <div class="gallery-area section-padding30 px-3 mt-5 mb-5">
              <div class="container">
                  <h2 class="mb-3">Subir Archivos (Im√°genes y Videos)</h2>
                  
                  <div
                      id="uploadArea"
                      class="upload-area d-flex flex-column justify-content-center align-items-center text-center"
                      style="min-height: 200px;"
                  >
                      <div class="upload-icon mb-2">
                          <i class="fas fa-folder-open fa-2x"></i>
                      </div>
                      <div class="upload-text mb-1">Arrastra tus archivos aqu√≠</div>
                      <div class="upload-subtext">o haz clic para seleccionar m√∫ltiples archivos</div>
                      <div class="upload-subtext mt-1">
                          <small>Soporta: Im√°genes (JPG, PNG, GIF, WebP) y Videos (MP4, WebM, MOV)</small>
                      </div>
                      <input
                          type="file"
                          id="fileInput"
                          accept="image/*,video/*"
                          multiple
                          class="position-absolute w-100 h-100 opacity-0"
                          style="cursor: pointer;"
                      />
                  </div>
                  
                  <div class="d-flex justify-content-center flex-wrap mt-3">
                      <button class="btn card-btn1" id="selectButton">
                          <i class="fas fa-folder me-1"></i> Seleccionar
                      </button>
                      <button class="btn card-btn1" id="uploadAllButton" style="display: none;">
                          <i class="fas fa-upload me-1"></i> Subir Todos
                      </button>
                      <button class="btn btn-secondary" id="clearAllButton" style="display: none;">
                          <i class="fas fa-trash me-1"></i> Limpiar
                      </button>
                  </div>
                  
                  <div id="fileList" class="mt-4">
                      <!-- Aqu√≠ se mostrar√°n los archivos seleccionados -->
                  </div>
                  
                  <div id="uploadResults" class="mt-4">
                      <!-- Aqu√≠ se mostrar√°n los resultados de la subida -->
                  </div>
              </div>
          </div>

        <!-- Gallery Area End -->
    </main>
<footer>
  <!-- Footer Boda Juan Carlos & Esther -->
  <div class="footer-main" style="background-image: url('assets/img/gallery/section_bg4.png');">
    <div class="footer-area footer-padding">
      <div class="container text-center">
        <!-- Nombres y Fecha -->
        <div class="row justify-content-center mb-30">
          <div class="col-lg-8">
            <h2 class="text-white">Juan Carlos &amp; Esther</h2>
            <p class="text-white">20 de junio de 2025</p>
            <img class="w-100" src="assets/img/gallery/tittle_img.png" alt="Decoraci√≥n" style="margin-top:10px;">
          </div>
        </div>
        <!-- Mensaje de agradecimiento -->
        <div class="row justify-content-center mb-50">
          <div class="col-lg-8">
            <p class="text-white">¬°Gracias por acompa√±arnos en este d√≠a tan especial! Nos hace mucha ilusi√≥n celebrar con todos vosotros.</p>
          </div>
        </div>
        <!-- Redes Sociales -->
        <div class="row justify-content-center">
          <div class="col-auto">
            <a href="https://www.instagram.com/juanyesther" target="_blank" class="footer-social">
              <i class="fab fa-instagram fa-2x"></i>
            </a>
          </div>
          <div class="col-auto">
            <a href="https://www.facebook.com/juanyesther" target="_blank" class="footer-social">
              <i class="fab fa-facebook-f fa-2x"></i>
            </a>
          </div>
          <div class="col-auto">
            <a href="https://www.twitter.com/juanyesther" target="_blank" class="footer-social">
              <i class="fab fa-twitter fa-2x"></i>
            </a>
          </div>
        </div>
        <!-- Cr√©ditos -->
        <div class="row justify-content-center mt-50">
          <div class="col-lg-8">
            <p class="text-white" style="font-size: 0.9rem;">Dise√±o web por Jos√© √Ångel Dorado | &copy; 2025 Todos los derechos reservados</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Fin Footer Boda -->
</footer>


	<!-- JS here -->
	
		<!-- All JS Custom Plugins Link Here here -->
        <script src="./assets/js/vendor/modernizr-3.5.0.min.js"></script>
		<!-- Jquery, Popper, Bootstrap -->
		<script src="./assets/js/vendor/jquery-1.12.4.min.js"></script>
        <script src="./assets/js/popper.min.js"></script>
        <script src="./assets/js/bootstrap.min.js"></script>
	    <!-- Jquery Mobile Menu -->
        <script src="./assets/js/jquery.slicknav.min.js"></script>

		<!-- Jquery Slick , Owl-Carousel Plugins -->
        <script src="./assets/js/owl.carousel.min.js"></script>
        <script src="./assets/js/slick.min.js"></script>
        <!-- Date Picker -->
        <script src="./assets/js/gijgo.min.js"></script>
		<!-- One Page, Animated-HeadLin -->
        <script src="./assets/js/wow.min.js"></script>
		<script src="./assets/js/animated.headline.js"></script>
        <script src="./assets/js/jquery.magnific-popup.js"></script>

		<!-- Scrollup, nice-select, sticky -->
        <script src="./assets/js/jquery.scrollUp.min.js"></script>
        <script src="./assets/js/jquery.nice-select.min.js"></script>
        <script src="./assets/js/jquery.sticky.js"></script>

        <!-- counter , waypoint -->
        <script src="./assets/js/jquery.counterup.min.js"></script>
        <script src="./assets/js/waypoints.min.js"></script>

        <!-- contact js -->
        <script src="./assets/js/contact.js"></script>
        <script src="./assets/js/jquery.form.js"></script>
        <script src="./assets/js/jquery.validate.min.js"></script>
        <script src="./assets/js/mail-script.js"></script>
        <script src="./assets/js/jquery.ajaxchimp.min.js"></script>
        
		<!-- Jquery Plugins, main Jquery -->	
        <script src="./assets/js/plugins.js"></script>
        <script src="./assets/js/main.js"></script>
        
    </body>

    <script>
        const fileInput = document.getElementById("fileInput");
        const selectButton = document.getElementById("selectButton");
        const uploadAllButton = document.getElementById("uploadAllButton");
        const clearAllButton = document.getElementById("clearAllButton");
        const uploadArea = document.getElementById("uploadArea");
        const fileList = document.getElementById("fileList");
        const uploadResults = document.getElementById("uploadResults");

        let selectedFiles = new Map(); // Usar Map para manejar archivos √∫nicos
        let uploadedFiles = [];

        // Funci√≥n para formatear el tama√±o del archivo
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Funci√≥n para determinar el tipo de archivo
        function getFileType(file) {
            if (file.type.startsWith('image/')) return 'image';
            if (file.type.startsWith('video/')) return 'video';
            return 'unknown';
        }

        // Funci√≥n para crear la preview de un archivo
        function createFilePreview(file, fileId) {
            const fileType = getFileType(file);
            
            const previewDiv = document.createElement('div');
            previewDiv.className = 'file-preview d-flex align-items-center';
            previewDiv.setAttribute('data-file-id', fileId);

            let mediaElement = '';
            if (fileType === 'image') {
                const url = URL.createObjectURL(file);
                mediaElement = `<img src="${url}" alt="Preview" />`;
            } else if (fileType === 'video') {
                const url = URL.createObjectURL(file);
                mediaElement = `<video src="${url}" controls muted></video>`;
            } else {
                mediaElement = `<div class="d-flex align-items-center justify-content-center" style="width: 80px; height: 60px; background-color: #f8f9fa; border-radius: 4px; border: 1px dashed #dee2e6;">
                    <span style="font-size: 1.5rem;">üìÑ</span>
                </div>`;
            }

            previewDiv.innerHTML = `
                <div class="flex-shrink-0">
                    ${mediaElement}
                </div>
                <div class="file-info flex-grow-1">
                    <div class="file-name">${file.name}</div>
                    <div class="file-size">${formatFileSize(file.size)}</div>
                    <span class="file-type ${fileType}">${fileType.toUpperCase()}</span>
                    <div class="upload-status status-pending" id="status-${fileId}">Pendiente</div>
                </div>
                <div class="flex-shrink-0">
                    <button class="remove-file" onclick="removeFile('${fileId}')">√ó</button>
                </div>
            `;

            return previewDiv;
        }

        // Funci√≥n para agregar archivos
        function addFiles(files) {
            Array.from(files).forEach(file => {
                // Verificar tipos permitidos
                const fileType = getFileType(file);
                if (fileType === 'unknown') {
                    alert(`El archivo "${file.name}" no es compatible. Solo se permiten im√°genes y videos.`);
                    return;
                }

                // Crear ID √∫nico para el archivo
                const fileId = Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                
                // Agregar al Map
                selectedFiles.set(fileId, file);
                
                // Crear preview
                const previewElement = createFilePreview(file, fileId);
                fileList.appendChild(previewElement);
            });

            // Mostrar/ocultar botones
            updateButtons();
        }

        // Funci√≥n para remover un archivo
        function removeFile(fileId) {
            selectedFiles.delete(fileId);
            const previewElement = document.querySelector(`[data-file-id="${fileId}"]`);
            if (previewElement) {
                previewElement.remove();
            }
            updateButtons();
        }

        // Funci√≥n para limpiar todos los archivos
        function clearAllFiles() {
            selectedFiles.clear();
            fileList.innerHTML = '';
            uploadResults.innerHTML = '';
            updateButtons();
        }

        // Funci√≥n para actualizar la visibilidad de los botones
        function updateButtons() {
            const hasFiles = selectedFiles.size > 0;
            uploadAllButton.style.display = hasFiles ? 'inline-block' : 'none';
            clearAllButton.style.display = hasFiles ? 'inline-block' : 'none';
        }

        // Funci√≥n para subir un archivo individual
        async function uploadFile(fileId, file) {
            const statusElement = document.getElementById(`status-${fileId}`);
            
            try {
                statusElement.textContent = 'Subiendo...';
                statusElement.className = 'upload-status status-uploading';

                const reader = new FileReader();
                
                return new Promise((resolve, reject) => {
                    reader.onload = async () => {
                        const dataUrl = reader.result;
                        const [prefix, base64String] = dataUrl.split(",");
                        const mimeMatch = prefix.match(/data:(.*);base64/);
                        const mimeType = mimeMatch ? mimeMatch[1] : "application/octet-stream";

                        const payload = {
                            filename: file.name,
                            mimeType,
                            data: base64String
                        };

                        try {
const response = await fetch("/.netlify/functions/upload", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body:   JSON.stringify(payload)
});

/* --- LEER EL CUERPO UNA SOLA VEZ --- */
const contentType = response.headers.get("content-type") || "";
let data; // ser√° objeto JSON o string plano

if (contentType.includes("application/json")) {
  data = await response.json();            // ‚Üê √∫nica lectura
} else {
  data = await response.text();            // ‚Üê √∫nica lectura
}

/* --- GESTI√ìN DE ERRORES --- */
if (!response.ok) {
  // data puede ser objeto { error } o texto
  const msg = typeof data === "object" ? data.error : data;
  throw new Error(msg || `HTTP ${response.status}`);
}

/* --- √âXITO --- */
statusElement.textContent = "Subido ‚úì";
statusElement.className   = "upload-status status-success";
resolve(data); // ‚Üê devuelve { filename, url } que envi√≥ tu funci√≥n Netlify


                        } catch (err) {
                            statusElement.textContent = 'Error ‚úó';
                            statusElement.className = 'upload-status status-error';
                            reject(err);
                        }
                    };

                    reader.onerror = () => reject(new Error('Error al leer el archivo'));
                    reader.readAsDataURL(file);
                });

            } catch (err) {
                statusElement.textContent = 'Error ‚úó';
                statusElement.className = 'upload-status status-error';
                throw err;
            }
        }

        // Funci√≥n para subir todos los archivos
        async function uploadAllFiles() {
            uploadAllButton.disabled = true;
            uploadAllButton.textContent = 'Subiendo...';

            const uploadPromises = Array.from(selectedFiles.entries()).map(([fileId, file]) => 
                uploadFile(fileId, file).catch(err => ({error: err.message, file: file.name}))
            );

            try {
                const results = await Promise.all(uploadPromises);
                
                // Mostrar resultados
                const successCount = results.filter(r => !r.error).length;
                const errorCount = results.filter(r => r.error).length;
                
                uploadResults.innerHTML = `
                    <div class="alert alert-info">
                        <h5>Resultados de la subida:</h5>
                        <p>‚úÖ Exitosos: ${successCount}</p>
                        ${errorCount > 0 ? `<p>‚ùå Errores: ${errorCount}</p>` : ''}
                    </div>
                `;

            } catch (err) {
                console.error('Error general:', err);
            } finally {
                uploadAllButton.disabled = false;
                uploadAllButton.textContent = '‚¨ÜÔ∏è Subir';
            }
        }

        // EVENTOS PARA DRAG & DROP
        uploadArea.addEventListener('dragover', function(e) {
            e.preventDefault();
            e.stopPropagation();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', function(e) {
            e.preventDefault();
            e.stopPropagation();
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', function(e) {
            e.preventDefault();
            e.stopPropagation();
            uploadArea.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                addFiles(files);
            }
        });

        // EVENTOS PARA CLICK Y SELECCI√ìN
        uploadArea.addEventListener('click', function() {
            fileInput.click();
        });

        selectButton.addEventListener('click', function() {
            fileInput.click();
        });

        fileInput.addEventListener('change', function(e) {
            if (e.target.files.length > 0) {
                addFiles(e.target.files);
                // Limpiar el input para permitir seleccionar los mismos archivos otra vez
                e.target.value = '';
            }
        });

        // EVENTOS PARA BOTONES
        uploadAllButton.addEventListener('click', uploadAllFiles);
        clearAllButton.addEventListener('click', clearAllFiles);

        // Hacer la funci√≥n removeFile global
        window.removeFile = removeFile;
    </script>
    <script>
    const refreshButton = document.getElementById("refreshButton");
    const gallery = document.getElementById("gallery");

    // Funci√≥n para cargar y mostrar todas las im√°genes
    async function loadGallery() {
      // 1) Limpiamos la galer√≠a antes de recargar
      gallery.innerHTML = "";

      try {
        // 2) Hacemos fetch a la funci√≥n que lista im√°genes
        const response = await fetch("/.netlify/functions/listImages");

        // 3) Convertimos la respuesta a JSON
        const images = await response.json();

        if (!response.ok) {
          // Si status es 400/500, images.error tendr√° el mensaje
          alert("Error al cargar im√°genes: " + (images.error || "Desconocido"));
          return;
        }

        if (!images.length) {
          gallery.innerHTML = "<p>No hay im√°genes en la carpeta.</p>";
          return;
        }

        // 4) Recorremos el array y creamos un elemento para cada imagen
        images.forEach((img) => {
          const item = document.createElement("div");
          item.classList.add("item");

          // Imagen
          const imageEl = document.createElement("img");
          imageEl.src = img.url;
          imageEl.alt = img.public_id;

          // Texto debajo con el public_id (opcional)
          const caption = document.createElement("p");
          caption.textContent = img.public_id.split("/").pop(); 
          // mostramos s√≥lo el nombre, sin la carpeta

          item.appendChild(imageEl);
          item.appendChild(caption);
          gallery.appendChild(item);
        });

      } catch (err) {
        console.error("Error general cargando la galer√≠a:", err);
        alert("Ocurri√≥ un error al cargar la galer√≠a. Revisa la consola.");
      }
    }

    // Cargar la galer√≠a la primera vez al abrir la p√°gina
    loadGallery();

    // Tambi√©n permitir recargar manualmente
    refreshButton.addEventListener("click", loadGallery);
  </script>

</html>